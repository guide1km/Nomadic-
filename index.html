<!DOCTYPE html><html lang="mn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nomadic App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .bar-fill {
      transition: width 0.3s ease;
      max-width: 100%;
      min-width: 0;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  <main class="max-w-2xl mx-auto px-4 py-10 space-y-8"><!-- Title -->
<h1 class="text-3xl font-bold text-center text-blue-700">Nomadic “Æ–Ω—ç–ª–≥—ç—ç & –°—ç—Ç–≥—ç–≥–¥—ç–ª</h1>

<!-- Admin Reset Section (visible only for admin) -->
<div id="admin-reset" class="text-center hidden">
  <button onclick="resetRatings()" class="text-sm text-red-600 underline">“Æ–Ω—ç–ª–≥—ç—ç–≥ 0-–æ–æ—Å —ç—Ö–ª“Ø“Ø–ª—ç—Ö</button>
</div>

<!-- Rating Section -->
<section id="rating-section" class="bg-white rounded-xl shadow p-6">
  <h2 class="text-xl font-semibold mb-4 text-center">“Æ–Ω—ç–ª–≥—ç—ç ”©–≥”©—Ö</h2>
  <div id="rating-stars" class="flex justify-center gap-2 text-3xl cursor-pointer">
    <span data-star="1">‚òÜ</span>
    <span data-star="2">‚òÜ</span>
    <span data-star="3">‚òÜ</span>
    <span data-star="4">‚òÜ</span>
    <span data-star="5">‚òÜ</span>
  </div>
  <div class="mt-2 text-center text-gray-600">
    “Æ–Ω—ç–ª–≥—ç—ç: <span id="rating-value">0.0</span>/5
  </div>
  <div class="space-y-1 mt-4 text-sm text-gray-700">
    <div class="flex items-center">
      <span class="w-5">5‚òÖ</span>
      <div class="bg-gray-200 w-full h-2 mx-2 rounded overflow-hidden">
        <div id="bar-5" class="bar-fill bg-yellow-400 h-2 w-0"></div>
      </div>
      <span id="count-5">0</span>
    </div>
    <div class="flex items-center">
      <span class="w-5">4‚òÖ</span>
      <div class="bg-gray-200 w-full h-2 mx-2 rounded overflow-hidden">
        <div id="bar-4" class="bar-fill bg-yellow-400 h-2 w-0"></div>
      </div>
      <span id="count-4">0</span>
    </div>
    <div class="flex items-center">
      <span class="w-5">3‚òÖ</span>
      <div class="bg-gray-200 w-full h-2 mx-2 rounded overflow-hidden">
        <div id="bar-3" class="bar-fill bg-yellow-400 h-2 w-0"></div>
      </div>
      <span id="count-3">0</span>
    </div>
    <div class="flex items-center">
      <span class="w-5">2‚òÖ</span>
      <div class="bg-gray-200 w-full h-2 mx-2 rounded overflow-hidden">
        <div id="bar-2" class="bar-fill bg-yellow-400 h-2 w-0"></div>
      </div>
      <span id="count-2">0</span>
    </div>
    <div class="flex items-center">
      <span class="w-5">1‚òÖ</span>
      <div class="bg-gray-200 w-full h-2 mx-2 rounded overflow-hidden">
        <div id="bar-1" class="bar-fill bg-yellow-400 h-2 w-0"></div>
      </div>
      <span id="count-1">0</span>
    </div>
  </div>
</section>

<!-- Comment Section -->
<section id="comment-section" class="bg-white rounded-xl shadow p-6">
  <h2 class="text-xl font-semibold mb-4 text-center">–°—ç—Ç–≥—ç–≥–¥—ç–ª “Ø–ª–¥—ç—ç—Ö</h2>
  <form id="comment-form" class="space-y-3">
    <input id="comment-name" type="text" placeholder="–ù—ç—Ä..." class="w-full p-2 border rounded" required>
    <textarea id="comment-text" rows="3" placeholder="–°—ç—Ç–≥—ç–≥–¥—ç–ª –±–∏—á–Ω—ç “Ø“Ø..." class="w-full p-2 border rounded" required></textarea>
    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">–ò–ª–≥—ç—ç—Ö</button>
  </form>
  <div id="comment-list" class="mt-4 space-y-2"></div>
</section>

  </main>
  <!-- Chatbot UI —ç—Ö–ª—ç–ª -->
<button onclick="document.getElementById('chatbot-box').classList.remove('hidden')"
  class="fixed bottom-24 right-4 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 z-50">üí¨</button>

<div id="chatbot-box" class="hidden fixed bottom-28 right-4 bg-white w-80 h-96 shadow-lg border rounded-lg flex flex-col z-50">
  <div class="bg-blue-600 text-white p-2 flex justify-between items-center rounded-t-lg">
    <span>Chatbot</span>
    <button onclick="document.getElementById('chatbot-box').classList.add('hidden')">‚ùå</button>
  </div>
  <div id="chat-content" class="flex-1 overflow-y-auto p-2 text-sm space-y-2"></div>
  <form id="chat-form" class="p-2 flex border-t">
    <input id="chat-input" type="text" placeholder="–¢–µ–∫—Å—Ç –±–∏—á..." class="flex-1 p-1 border rounded" required>
    <button class="ml-2 bg-blue-600 text-white px-3 py-1 rounded">–ò–ª–≥—ç—ç—Ö</button>
  </form>
</div>
<!-- Chatbot UI —Ç”©–≥—Å–≥”©–ª -->
  <script>
    // CHATBOT
const chatForm = document.getElementById('chat-form');
const chatInput = document.getElementById('chat-input');
const chatContent = document.getElementById('chat-content');

const OPENAI_API_KEY = "YOUR_API_KEY_HERE"; // <-- —ç–Ω–¥ ”©”©—Ä–∏–π–Ω OpenAI API key —Ç–∞–≤–∏–Ω–∞

chatForm.addEventListener('submit', async (e) => {
  e.preventDefault();
  const userText = chatInput.value.trim();
  if (!userText) return;

  chatInput.value = '';
  chatContent.innerHTML += `<div><strong>–¢–∞:</strong> ${userText}</div>`;

  const res = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      "Authorization": `Bearer ${OPENAI_API_KEY}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      model: "gpt-3.5-turbo",
      messages: [{ role: "user", content: userText }]
    })
  });

  const data = await res.json();
  const botText = data.choices?.[0]?.message?.content || "–ê–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞...";
  chatContent.innerHTML += `<div><strong>Bot:</strong> ${botText}</div>`;
  chatContent.scrollTop = chatContent.scrollHeight;
});
    const stars = document.querySelectorAll('#rating-stars span');
    const ratingValue = document.getElementById('rating-value');
    const resetBtn = document.getElementById('admin-reset');// Simulate Admin Login (e.g., localStorage flag)
const isAdmin = localStorage.getItem('isAdmin') === 'true';
if (isAdmin) resetBtn.classList.remove('hidden');

function resetRatings() {
  if (confirm("–¢–∞ “Ø–Ω—ç–ª–≥—ç—ç–≥ –±“Ø—Ä—ç–Ω 0 –±–æ–ª–≥–æ—Ö —É—É?")) {
    localStorage.removeItem("ratings");
    localStorage.removeItem("userRated");
    location.reload();
  }
}

let userRated = localStorage.getItem('userRated');
let storedRatings = JSON.parse(localStorage.getItem("ratings") || "[]");

function updateRatingBars(ratings) {
  const total = ratings.length;
  const sum = ratings.reduce((a, b) => a + b, 0);
  const avg = total ? (sum / total).toFixed(1) : "0.0";
  ratingValue.textContent = avg;
  [5,4,3,2,1].forEach(val => {
    const count = ratings.filter(r => r === val).length;
    const percent = total ? Math.min((count / total) * 100, 100) : 0;
    document.getElementById(`count-${val}`).textContent = count;
    document.getElementById(`bar-${val}`).style.width = `${percent}%`;
  });
}

stars.forEach(star => {
  star.addEventListener('click', () => {
    if (userRated) return alert("–¢–∞ –∞–ª—å —Ö—ç–¥–∏–π–Ω “Ø–Ω—ç–ª–≥—ç—ç ”©–≥—Å”©–Ω –±–∞–π–Ω–∞.");
    const rating = parseInt(star.getAttribute('data-star'));
    storedRatings.push(rating);
    localStorage.setItem('ratings', JSON.stringify(storedRatings));
    localStorage.setItem('userRated', true);
    updateRatingBars(storedRatings);
    stars.forEach((s, i) => {
      s.classList.toggle('text-yellow-400', i < rating);
    });
  });
});
updateRatingBars(storedRatings);

// Comment
const commentForm = document.getElementById('comment-form');
const nameInput = document.getElementById('comment-name');
const textInput = document.getElementById('comment-text');
const commentList = document.getElementById('comment-list');
const comments = JSON.parse(localStorage.getItem('comments') || "[]");

function renderComments() {
  commentList.innerHTML = '';
  comments.forEach(c => {
    const div = document.createElement('div');
    div.className = 'p-2 border rounded bg-gray-50';
    div.innerHTML = `<strong>${c.name}</strong><p>${c.text}</p>`;
    commentList.appendChild(div);
  });
}

commentForm.addEventListener('submit', e => {
  e.preventDefault();
  const name = nameInput.value.trim();
  const text = textInput.value.trim();
  if (!name || !text) return;
  const comment = { name, text };
  comments.push(comment);
  localStorage.setItem('comments', JSON.stringify(comments));
  renderComments();
  commentForm.reset();
});

renderComments();

  </script>
</body>
</html>
